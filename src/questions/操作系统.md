# 进程
1. 什么是进程和线程？
2. 操作系统是怎么创建进程的
   等一个程序被执行时，操作系统会创建一个进程来执行程序，通常包括以下步骤：
   1. 分配进程控制快（PCB）：每个进程都有一个对应的PCB，他包含了进程的各种状态信息，如：PID、程序计数器、寄存器值、进程优先级、打开文件列表等。
   2. 分配内存空间：新进程需要内存来存储程序代码、数据和运行时栈等信息，这个空间通常是连续的，与其他进程的内存隔开。
   3. 初始化PCB：操作系统会根据程序的需要和目前的资源情况初始化PCB，设置其中的信息。
   4. 加载程序：OS会将程序加载进分配的内存中，包括代码和数据，设置程序的入口点等信息。
   5. 设置运行环境：操作系统会为新进程设置运行环境，包括栈空间、堆空间、文件描述符、信号控制等。同时，操作系统还会为进程分配 CPU 时间片，以便进程可以运行。
   6. 启动进程：当进程创建完成后，OS将进程加入进程调度队列中，并开始分配时间片给该进程，使其开始运行。
3. 操作系统是怎么创建线程的
   线程创建与进程类似
   1. 分配线程控制快 TCB
   2. 分配栈空间
   3. 初始化 TCB
   4. 设置运行环境
   5. 启动线程
4. 操作系统是怎么切换进程和线程的
   由调度器负责切换，当时间片用完或处于等待状态时，调度器会将CPU 时间片分配给下一个进程或线程，步骤如下：
   1. 保存当前上下文用于恢复执行
   2. 选择下一个进程或线程
   3. 恢复下一个进程或线程的上下文
5. 为什么线程切换更快
   线程切换比进程切换更快的主要原因在于线程共享了进程的地址空间和其他资源。由于线程在同一个进程中运行，它们可以共享进程的内存空间、文件描述符、信号处理程序等资源，而不需要进行大量的数据拷贝和状态切换。
   具体来说，线程切换的过程通常只需要保存和恢复线程的上下文，包括程序计数器、寄存器、栈指针等信息。这些信息都保存在线程控制块中，而线程控制块通常都是存储在进程的用户空间中，因此线程切换的代价通常很小，可以在微秒级别内完成。相比之下，进程切换的过程需要保存和恢复更多的状态信息，包括进程的地址空间、文件描述符、进程控制块等。由于进程之间的地址空间是独立的，因此在进程切换时需要进行大量的数据拷贝和状态切换，这个过程需要消耗较多的时间和资源。
6. 进程使用的内存空间是什么样的
   进程使用的内存空间通常可分为以下几个部分：
   1. 代码段：保存程序代码，通常是只读的
   2. 数据段：存储全局变量、静态变量和已初始化的数据，可读可写
   3. BSS 段：存储未初始化的全局变量和静态变量
   4. 堆
   5. 栈
7. 线程与进程是内存隔离的，为什么还说线程共享了进程的地址空间
   虽然线程和进程之间采用了内存隔离的机制，但是线程与进程之间的内存隔离方式是不同的。
   进程之间采用了完全独立的地址空间，每个进程都有自己的代码段、数据段、堆和栈等，不同进程之间的地址空间是相互独立的，进程之间不能直接访问彼此的数据结构和变量。
   线程之间共享相同的进程地址空间，也就是说，线程可以直接访问进程中的全局变量、静态变量、堆和栈等数据结构，不同线程之间可以共享这些数据结构，这也是线程能够更高效地进行协作的原因之一。但是，每个线程都有自己的栈空间，用于存储线程的局部变量和函数调用状态，不同线程之间的栈空间是相互独立的，线程之间不能直接访问彼此的栈空间。

8. 为什么有些程序能够修改其他程序执行时的内存中的变量值，例如CE
   可能由于以下几种情况：
   1. 调试器
   2. DLL 注入
   CE能够修改内存是因为：
   1. Windows 中每个进程都有自己的虚拟地址空间，而操作系统内部会通过内存映射文件的方式将文件映射到进程的虚拟地址空间中。通过内存映射文件，CE 可以访问和修改其他进程的内存空间。
   2. 操作系统调用：操作系统提供了一系列的系统调用/API，可以让程序访问和修改其他进程的内存。
9.  什么是协程
    协程可以看做是轻量级线程，也叫用户级线程，他由程序员在代码中控制，而不是操作系统调度
    在协程中，程序员可以显式地控制协程的切换和执行顺序，从而实现更加细粒度的并发控制和更高效的任务调度。
    协程调度一般有事件循环、协程池、协程栈等方式实现，python中有asyncio
    例如 js 中的 generator、rust 的 future 都可以看成协程的实现
10. 计算机的资源是怎么关联到一个进程的，如一个文件或网络请求
    进程在使用系统资源时，需要通过操作系统提供的系统调用（system call）接口来访问和操作系统资源，例如文件、设备、网络、进程等。
    1. 文件系统：使用文件描述符
    2. 设备：设备文件
    3. 网络：通过系统调用访问网络资源，使用套接字标识和管理网络连接
    4. 进程：进程可以通过系统调用创建、终止其他进程，还可以发送和接收消息，使用进程标识符（PID）。

# 文件系统


# io

# 内存分配
1. 为什么会栈溢出

# 编译原理
1. 代码变成CPU指令经过哪些阶段
1. debug 的原理，为什么能 debug